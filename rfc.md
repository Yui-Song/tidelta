# Tidelta 项目 RFC

## 项目背景
- 众所周知，TiDB 有非常强大的监控系统 (Prometheus & Grafana)。但是就是因为太强大了，监控指标太多，对小白用户不是那么友好，对比起来也不容易，为性能调优带来不小的困难。
- TiDelta 能帮助你整合 TiDB 关键路径的性能 metrics，并生成 Metrics Diff Report，方便用户对比任何两个时间段，或者是升级前后、测试库和生产库的性能指标，类似业界大佬 Oracle 的 AWR Diff Report。

## 项目目标
- 目标一：整合现有 TiDB Metrics 数据，整理关键路径时延指标
- 目标二：生成 Metrics Diff report

## 需求整理

### 产品定位：
一个用户可以方便在本地启动的TiDB性能诊断web服务

### 数据导入：
1. 能直接处理 tiup diag 输出的数据文件，主要是config和monitor。
2. 将其导入Prometheus，但是又不会和本地的TiDB的监控数据冲突。（比如将生产库的监控数据，导入测试库一起分析。）
### 数据展示：
1. 输入Prometheus连接，连上数据库
2. RAW Data Comparison（基础需求）：
	a. 可选取任何两个数据库，任何两个时间段，方便地对比指定的某个指标，直接展示两个时序图即可。
	b. 可选取任同一个数据库，任何两个时间段，方便地对比指定的某个指标，直接展示两个时序图即可。
	c. 需要能轻松选择指定TiDB已有的所有面板，列出具体指标。
3. 列出两个系统的config，置顶展示不一样的配置项。（只有对比两个系统时才有）
4. Diff Report（高级需求）：
	a. 可选取任何两个数据库，任何两个时间段，对比展示聚合过的TiDB关键路径性能指标表格
	b. 可选取任同一个数据库，任何两个时间段，对比展示聚合过的TiDB关键路径性能指标表格
	c. Diff Report 可以下载
